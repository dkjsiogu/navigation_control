# SLAM Toolbox çº¯å®šä½é…ç½®
# åŠŸèƒ½: åŠ è½½å·²ä¿å­˜çš„åœ°å›¾è¿›è¡Œå®šä½,ä¸å»ºå›¾

slam_toolbox:
  ros__parameters:
    # === åŸºç¡€è®¾ç½® ===
    use_sim_time: false
    
    # === å®šä½æ¨¡å¼è®¾ç½® ===
    mode: localization  # çº¯å®šä½æ¨¡å¼
    
    # === åœ°å›¾åŠ è½½è®¾ç½® ===
    # æ³¨æ„: SLAM Toolbox ä¸å‘å¸ƒåœ°å›¾,åªæä¾›å®šä½ (TF: map->odom)
    # åœ°å›¾ç”± map_server ä» pgm+yaml åŠ è½½å¹¶å‘å¸ƒåˆ° /map
    
    # === åæ ‡ç³»è®¾ç½® ===
    odom_frame: odom
    map_frame: map
    base_frame: base_link
    
    # === ä¼ æ„Ÿå™¨è®¾ç½® ===
    scan_topic: /scan
    use_scan_matching: true
    use_scan_barycenter: true
    
    # === è‡ªåŠ¨å®šä½è®¾ç½® ===
    # å¯ç”¨è‡ªåŠ¨åˆå§‹å®šä½ï¼ˆä¸ä¾èµ– /initialposeï¼‰
    do_loop_closing: true
    
    # å®šä½å‚æ•° - ä¸è®¾ç½®å›ºå®šåˆå§‹ä½å§¿ï¼Œè®©ç³»ç»Ÿè‡ªåŠ¨åŒ¹é…
    # initial_pose_x, initial_pose_y, initial_pose_yaw ä¸è®¾ç½®
    # SLAM Toolbox ä¼šé€šè¿‡æ¿€å…‰æ‰«æåŒ¹é…è‡ªåŠ¨æ‰¾åˆ°ä½ç½®
    
    # === æ‰«æåŒ¹é…å‚æ•° (é«˜ç²¾åº¦è½®å¼é‡Œç¨‹è®¡ä¼˜åŒ–) ===
    minimum_travel_distance: 0.05   # ğŸ”§ é™ä½åˆ°5cmï¼Œæ›´é¢‘ç¹æ›´æ–°å®šä½
    minimum_travel_heading: 0.1     # ğŸ”§ é™ä½åˆ°0.1rad=5.7åº¦
    scan_buffer_size: 20           # ğŸ”§ å¢åŠ ç¼“å†²åŒº,åˆ©ç”¨é‡Œç¨‹è®¡ç§¯ç´¯æ›´å¤šæ•°æ®
    scan_buffer_maximum_scan_distance: 15.0  # å¢åŠ åˆ°15m
    link_match_minimum_response_fine: 0.1
    link_scan_maximum_distance: 1.5
    loop_search_maximum_distance: 6.0         # ğŸ”§ å¢åŠ åˆ°6m (é‡Œç¨‹è®¡å‡†,å¯æœæ›´è¿œ)
    do_loop_closing: true
    loop_match_minimum_chain_size: 6          # ğŸ”§ é™ä½åˆ°6 (é‡Œç¨‹è®¡ç¨³å®š,æ˜“é—­åˆ)
    loop_match_maximum_variance_coarse: 2.0   # ğŸ”§ æ›´ä¸¥æ ¼ (ä¿¡ä»»é‡Œç¨‹è®¡)
    loop_match_minimum_response_coarse: 0.45  # ğŸ”§ æé«˜é˜ˆå€¼ (è´¨é‡ä¼˜å…ˆ)
    loop_match_minimum_response_fine: 0.55    # ğŸ”§ æé«˜ç²¾ç»†åŒ¹é…é˜ˆå€¼
    
    # === ç›¸å…³æ‰«æåŒ¹é…å‚æ•° (ä¿¡ä»»é«˜ç²¾åº¦é‡Œç¨‹è®¡) ===
    correlation_search_space_dimension: 0.3       # ğŸ”§ ç¼©å°åˆ°0.3m (é‡Œç¨‹è®¡å‡†,æ— éœ€å¤§èŒƒå›´æœç´¢)
    correlation_search_space_resolution: 0.005    # ä¿æŒ5mmé«˜ç²¾åº¦
    correlation_search_space_smear_deviation: 0.03 # ğŸ”§ è¿›ä¸€æ­¥å‡å°æ¨¡ç³Š
    
    # === å¾ªç¯é—­åˆå‚æ•° ===
    loop_search_space_dimension: 8.0
    loop_search_space_resolution: 0.05
    loop_search_space_smear_deviation: 0.03
    loop_search_maximum_distance: 5.0         # å¢å¤§ (æ–°å¢å‚æ•°)
    
    # === æ‰«æåŒ¹é…å™¨å‚æ•° (é‡Œç¨‹è®¡é«˜ç²¾åº¦æƒé‡) ===
    distance_variance_penalty: 0.3      # ğŸ”§ é™ä½è·ç¦»æƒ©ç½š (ä¿¡ä»»é‡Œç¨‹è®¡)
    angle_variance_penalty: 0.8         # ğŸ”§ é™ä½è§’åº¦æƒ©ç½š
    
    fine_search_angle_offset: 0.00349
    coarse_search_angle_offset: 0.349
    coarse_angle_resolution: 0.0349
    minimum_angle_penalty: 0.9
    minimum_distance_penalty: 0.5
    use_response_expansion: true
    
    # === ä¼˜åŒ–å‚æ•° (é…åˆé«˜ç²¾åº¦é‡Œç¨‹è®¡) ===
    max_laser_range: 12.0  # æ¿€å…‰æœ€å¤§è·ç¦»
    minimum_time_interval: 0.5  # 0.5ç§’æœ€å°é—´éš”
    transform_publish_period: 0.02  # 50Hzå‘å¸ƒTF (åŒ¹é…é‡Œç¨‹è®¡é¢‘ç‡)
    transform_timeout: 0.5          # ğŸ”§ å»¶é•¿è¶…æ—¶ (ä¿¡ä»»é‡Œç¨‹è®¡è¿ç»­æ€§)
    tf_buffer_duration: 30.0
    stack_size_to_use: 40000000
    
    # === è°ƒè¯•é€‰é¡¹ ===
    enable_interactive_mode: true   # å¯ç”¨äº¤äº’æ¨¡å¼,å…è®¸åŠ¨æ€è°ƒæ•´
    debug_logging: false
    throttle_scans: 1
    
    # === åœ°å›¾å‘å¸ƒå’ŒåŠ¨æ€ç»´æŠ¤ ===
    map_update_interval: 1.0        # åœ°å›¾æ›´æ–°é—´éš”(ç§’) - æ›´é¢‘ç¹æ›´æ–°
    publish_occupancy_map: true     # å‘å¸ƒå ç”¨æ …æ ¼åœ°å›¾åˆ° /slam_map
    map_always_update: true         # å§‹ç»ˆæ›´æ–°åœ°å›¾ (åŠ¨æ€ç»´æŠ¤!)
    
    # === åœ°å›¾è£å‰ªæ§åˆ¶ (ä¿æŒå®Œæ•´åœ°å›¾) ===
    # ç¦ç”¨åœ°å›¾è£å‰ª,ä¿æŒå®Œæ•´åœ°å›¾
    enable_interactive_mode: false
    map_update_interval: 0.0  # ç¦ç”¨åŠ¨æ€åœ°å›¾æ›´æ–°
